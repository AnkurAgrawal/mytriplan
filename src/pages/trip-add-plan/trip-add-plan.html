<!--
  Generated template for the TripAddActivityPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title *ngIf="plan">Add a {{plan.name | beautifyString:'small'}} to itinerary</ion-title>
    <ion-title *ngIf="!plan">Add to itinerary</ion-title>
    <ion-buttons start>
      <button ion-button (click)="cancel()">
        <span ion-text color="primary" showWhen="ios">
          {{ 'CANCEL_BUTTON' | translate }}
        </span>
        <ion-icon name="md-close" showWhen="android,windows"></ion-icon>
      </button>
    </ion-buttons>
    <ion-buttons end>
      <button ion-button (click)="done()" [disabled]="!newPlanForm.valid" strong>
        <span color="primary" showWhen="ios">
          {{ 'DONE_BUTTON' | translate }}
        </span>
        <ion-icon name="md-checkmark" showWhen="core,android,windows"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>

<ion-content scroll="true">
  <ion-slides #newPlanSlider>
    <ion-slide>
      <ion-item-group *ngFor="let planGroup of planGroups">
        <ion-item-divider color="dark">
          <ion-icon>
            <i class="fa fa-{{planGroup.icon}} fa-fw" aria-hidden="true"></i>
          </ion-icon>
          {{planGroup.name | beautifyString}}
        </ion-item-divider>
        <button ion-item (click)="openNewPlanForm(type)" *ngFor="let type of planGroup.types">
          {{type.NAME | beautifyString}}
        </button>
      </ion-item-group>
    </ion-slide>
    <ion-slide>
      <form [formGroup]="newPlanForm" (ngSubmit)="logForm()">
        <ion-list>
          <template ngFor let-field [ngForOf]="newPlanForm.controls | objectKeysToArray">
            <ion-item *ngIf="!newPlanForm.controls[field].controls">
              <ion-label floating>{{field | beautifyString}}</ion-label>
              <ion-input *ngIf="!(field | isType:'date':'time':'address')" formControlName="{{field}}"></ion-input>
              <ion-textarea *ngIf="field | isType:'address'" formControlName="{{field}}"></ion-textarea>
              <ion-datetime *ngIf="field | isType:'time'" displayFormat="h:mm A" pickerFormat="h mm A" formControlName="{{field}}"></ion-datetime>
              <ion-datetime *ngIf="field | isType:'date'" displayFormat="MM/DD/YYYY" pickerFormat="MMM DD YYYY" formControlName="{{field}}"></ion-datetime>
            </ion-item>
            <ion-card *ngIf="newPlanForm.controls[field].controls" formGroupName="{{field}}">
              <ion-card-header>{{field | beautifyString}}</ion-card-header>
              <ion-card-content>
                <ion-item *ngFor="let f of newPlanForm.controls[field].controls | objectKeysToArray">
                  <ion-label floating>{{f | beautifyString}}</ion-label>
                  <ion-input formControlName="{{f}}"></ion-input>
                </ion-item>
              </ion-card-content>
            </ion-card>
          </template>
<!--
          <ion-item>
            <ion-label floating>Address</ion-label>
            <ion-input (click)="showAddressModal()" formControlName="address"></ion-input>
          </ion-item>
-->
          <button ion-button type="submit" [disabled]="!newPlanForm.valid">Submit</button>
        </ion-list>
      </form>
    </ion-slide>
  </ion-slides>
</ion-content>
